<!DOCTYPE html>
<html>

<head>
  <title>hello-js-se05-ep-06</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.min.js"></script>
</head>

<body>
  <form v-on:submit.prevent="onSubmit">
    Nome:
    <br>
    <input type="text" name="Nome" v-model="pessoa.nome">
    <br> Telefone:
    <br>
    <input type="text" name="Telefone" v-model="pessoa.telefone">
    <br> Nascimento:
    <br>
    <input type="text" name="Nascimento" v-model="pessoa.nascimento">
    <br>
    <input type="submit" value="Submit">
  </form>
  <ul id="lista-pessoas">
    <li v-for="l in lista">
      {{ l.idcontato }}
    </li>
  </ul>
  <script>
    const api = axios.create({
      baseURL: "http://localhost:3000"
    })
    new Vue({
      el: "#lista-pessoas",
      data: {
        lista: null
      },
      created() {
        api.get("/listpessoas")
          .then(ret => this.lista = ret.data)
      },
      methods: {
        onSubmit(){
          api.post("/addcontato", this.pessoa).then(ret => {

          })
        }
      }
      })
  </script>


</body>

</html>